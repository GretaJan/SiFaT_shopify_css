let desktopSize = 1350;
let activeClass = 'active';

window.addEventListener("load", function() {
  const submenuParents = document.querySelector('.header__inline-menu details');
  
  if(submenuParents){
    submenuParents.forEach(function(item){
      item.addEventListener('click', function(){
      	if(item.classList.contains("active"))
          closeSubmenu(item)
		  return
      })
      openSubmenu(item)
    })
  }
  
    if(window.innerWidth < desktopSize) {
	const submenuParents = document.querySelectorAll('[class*="submenu-item-level"]');
	submenuParents.forEach(function(item){
          removeMenuParentLinks(item)
        })
	
        createBurger();

        const burger = document.querySelector('.menu-burger-wrap');
        if(burger) 
            burger.addEventListener('click',  menuAction)
    }
});

window.addEventListener("load", function() {
    if(window.innerWidth < desktopSize) {
        const burger = document.querySelector('.menu-burger-wrap');
        if(burger) 
            burger.addEventListener('click',  menuAction)
    }
});

window.addEventListener("resize", function() {
    if(window.innerWidth > 1024) {
        removeBurger();
        return;
    }
    createBurger();
    const burger = document.querySelector('.menu-burger-wrap');
    if(burger) 
        burger.addEventListener('click',  menuAction)
});

function menuAction(){
    const menu = document.querySelector('.header__inline-menu');
    if(!menu.classList.contains('active')) {
        openMenu(menu);
        return;
    } 
    closeMenu(menu)
} 

function openMenu(menu){
        const burger = document.querySelector('.menu-burger-wrap');
        menu.classList.add('active');
        burger.classList.add('active');
        document.body.classList.add('mobileMenuOpen');
}

function closeMenu(menu){
    const burger = document.querySelector('.menu-burger-wrap');
    menu.classList.remove('active');
    burger.classList.remove('active');
    document.body.classList.remove('mobileMenuOpen');
}

function createBurger(){
    const burger = document.querySelector('.menu-burger-wrap');
    if(burger) return;

    const header = document.querySelector('.header-inner-wrapper');
    let icon = `<div class="menu-burger-wrap"><div class="menu-burger"></div></div>`;
    header.innerHTML += icon;
    
}

function removeBurger(){
    const burger = document.querySelector('.menu-burger-wrap');
    if(burger) {
        burger.remove();
    }
   
}
  
  function openSubmenu(submenu){
  	let submenuChild = submenu.querySelector('.header-submenu-inner').clientHeight;
    submenu.style.height = submenuChild + 'px';
  }
  
    function closeSubmenu(submenu){
    submenu.style.height = 0;
  }
  
  function removeMenuParentLinks(item){
	const child = item.querySelector('.header__submenu-level');
    	if(!child) return;
	child.setAttribute('href', '');
  }

//////////

         assign custom_type = section.settings.type 
        assign video_link = block.settings.video_link 
        assign image = block.settings.image 

        assign imgPosition = block.settings.img_position 
        assign imgCoverage = block.settings.img_coverage 


        assign title = block.settings.title   
        assign titleColor = block.settings.title_color 
        assign titleSize = block.settings.title_size 
         assign titleSubPosition = block.settings.title_subtitle_horizontal_position 
         assign subtitle = block.settings.subtitle 
         assign subtitleColor = block.settings.subheading_color 
         assign paragraphPosition = block.settings.paragraph_horizontal_position
         assign buttonPosition = block.settings.button_position
         assign buttonPosition = block.settings.button_last
         assign hideOnMobile = section.settings.hide_on_mobile 
         assign textColor = block.settings.text_color 

button_label   button_link    button_type



 {% for collection in collections %}
                                                  {% assign collectionJson = collection | json %} 
                                                  {% assign collectionJsonDowncase = collectionJson | downcase %}
                                                  {% if collectionJson contains childlink.title %}
                                                      {% for parent_collection in collections %}
                                                          {% assign collectionHasNum = 0 %}
                                                          {% if grandchildlink.url == parent_collection.url and collectionJson contains parent_collection.title and collectionJsonDowncase contains childUrl and collectionJson contains 'tag' %}
                                                              {% for product in parent_collection.products %}
                                                                  {% for tag in product.tags %}
                                                                                            {{collection.title}}
                                              {{ tag }}
                                                                      {% if collection.title == tag %}

                                                                          <li class="submenu-item-level-2">
                                                                            <a href="{{collection.url}}">
                                                                                {{ collection.title }}
                                                                            </a>
                                                                          </li>
                                                                      {% endif %}
                                                                  {% endfor %}
                                                              {% endfor %}
                                                          {% endif %}
                                                      {% endfor %}
                                                  {% endif %}
                                             {% endfor %}

      shopify@marktbande.de                                                    {% if grandchildlink.url == parent_collection.url and collectionJson contains parent_collection.title and collectionJsonDowncase contains childUrl and collectionJson contains 'tag' %}